
<div class="mb-4 md:mb-12">
  <h4
    #header
    (click)="navigationService.collapseSubmenuItem(apiItem.clickedSubscriptionName, !isCollapsed);"
    class="mx-4 mb-2 md:mb-8 text-lg tracking-tight leading-10 font-bold text-gray-900
      hover:text-gray-700 sm:leading-none md:text-xl cursor-pointer"
    >
    {{ apiItem.method }}
    {{ apiItem.path }}
    <svg
      *ngIf="isCollapsed"
      width="0.6em"
      height="0.6em"
      viewBox="0 0 256 256"
      class="inline ml-1 -mt-1 fill-current"
        ><g><g><polygon points="79.093,0 48.907,30.187 146.72,128 48.907,225.813 79.093,256 207.093,128"/></g></g></svg>
    <svg
      *ngIf="!isCollapsed"
      width="0.6em"
      height="0.6em"
      viewBox="0 0 256 256"
      class="inline ml-1 -mt-1 fill-current"
      ><g><g><polygon points="225.813,48.907 128,146.72 30.187,48.907 0,79.093 128,207.093 256,79.093"/></g></g></svg>
  </h4>
  <ul
    class="md:grid md:grid-cols-2 md:col-gap-8 md:row-gap-10"
    *ngIf="!isCollapsed"
    >
    <li class="relative">
      <form [formGroup]="form">
        <div>
          <h6
            class="mb-2 mx-4 md:mx-6 mr-4 mt-4 md:mb-8 text-lg tracking-tight leading-10 font-bold text-gray-900 sm:leading-none md:text-xl"
            >
            Authentication
          </h6>
        </div>
        <div class="md:flex md:items-center mx-4 mb-4 relative">
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="authentication">
              Auth
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <select
              aria-label="Authentication"
              name="authentication"
              class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
              >
              <option>{{ apiItem.username }}</option>
            </select>
          </div>
        </div>
        <div *ngIf="!apiItem.hasNoParams">
          <h6
            class="mx-4 md:mx-6 mr-4 mt-6 mb-2 md:mb-8 text-lg tracking-tight leading-10 font-bold text-gray-900 sm:leading-none md:text-xl"
            >
            Parameters
          </h6>
        </div>
        <div
          *ngIf="apiItem.requiresDocumentID"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="documentID">
              Document ID
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Document ID"
                name="documentID"
                formControlName="documentID"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.documentID.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.requiresPresetID"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="presetID">
              Preset ID
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Preset ID"
                name="presetID"
                formControlName="presetID"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.presetID.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.requiresTagKey"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="tagKey">
              Tag Key
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Tag Key"
                name="tagKey"
                formControlName="tagKey"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.tagKey.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.requiresPostJson"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="postJson">
              JSON to POST
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <textarea
                aria-label="JSON to POST"
                name="postJson"
                formControlName="postJson"
                rows="4"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.postJson.errors }"
              ></textarea>
          </div>
        </div>
        <div
          *ngIf="apiItem.allowsVersionID"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="limit">
              Version ID
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Version ID"
                name="versionID"
                formControlName="versionID"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.versionID.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.allowsDate"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="tagKey">
              Date
              <small class="block">
                (YYYY-MM-dd)
              </small>
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Date (YYYY-MM-dd)"
                name="date"
                formControlName="date"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.date.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.allowsDate"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="tagKey">
              Timezone Offset
              <small class="block">(e.g., -0500)</small>
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Timezone Offset"
                name="tz"
                formControlName="tz"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.tz.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.requiresFileUpload"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="tagKey">
              File to Upload
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="File to Upload"
                name="fileUpload"
                formControlName="fileUpload"
                type="file"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.fileUpload.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.allowsLimit"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="limit">
              Limit
              <small class="block">(number)</small>
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Limit (number)"
                name="limit"
                formControlName="limit"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.limit.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.hasPagingTokens"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="previous">
              Previous
              <small class="block">(paging token)</small>
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Previous (paging token)"
                name="previous"
                formControlName="previous"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.previous.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.hasPagingTokens"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="next">
              Next
              <small class="block">(paging token)</small>
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Next (paging token)"
                name="next"
                formControlName="next"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.next.errors }"
              />
          </div>
        </div>
        <div
          *ngIf="apiItem.allowsPath"
          class="md:flex md:items-center mx-4 mb-4 relative"
          >
          <div class="md:w-1/3">
            <label class="block text-gray-500 font-bold md:text-right mb-1 md:mb-0 pr-4" for="path">
              Path
              <small class="block">must url encode - only following characters allowed: A-Z a-z 0-9 - _ . ! ~ * ' ( )</small>
            </label>
          </div>
          <div class="md:w-2/3 lg:w-1/2">
            <input
                aria-label="Path"
                name="path"
                formControlName="path"
                type="text"
                class="appearance-none rounded-md relative block w-full px-3 py-3 border border-gray-600
                  placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10 sm:text-xl sm:leading-5"
                [ngClass]="{ 'bg-red-200': this.formSubmitted && this.form.controls.path.errors }"
              />
          </div>
        </div>
      </form>
    </li>
    <li class="relative mt-10 sm:mt-2 md:mt-0">
      <div class="flex flex-rows w-full">
        <div class="flex-grow-0">
          <h6
            class="mx-4 md:mx-6 mr-4 mt-4 mb-2 md:mb-4 text-lg tracking-tight leading-10 font-bold text-gray-900 sm:leading-none md:text-xl"
            >
            Request
          </h6>
        </div>
        <div class="flex-grow text-right mt-2 mb-2 relative">
          <button
            (click)="fetch()"
            [disabled]="this.form.invalid"
            class="px-2 md:px-4 py-1 border border-transparent text-base leading-6 font-medium rounded-md shadow
              text-white focus:outline-none focus:shadow-outline
              transition duration-150 ease-in-out"
            [ngClass]="{
                'bg-green-600 hover:bg-green-500': !this.form.invalid,
                'bg-gray-500 hover:bg-gray-500': this.form.invalid
              }"
            >
            Fetch
          </button>
        </div>
      </div>
      <div
        class="md:flex md:items-center mx-4 mb-4 relative"
        >
          <div class="md:w-full">
            <ul class="list-reset flex border-b">
              <li class="-mb-px mr-1">
                <a
                  class="inline-block cursor-pointer border-l border-t border-r rounded-t py-2 px-4 text-blue-dark font-semibold"
                  [ngClass]="{'font-bold text-orange-600 cursor-text': currentRequestTab == 'http'}"
                  (click)="setCurrentRequestTab('http')"
                  >
                  HTTP
                </a>
              </li>
              <li class="-mb-px mr-1">
                <a
                  class="inline-block cursor-pointer border-l border-t border-r rounded-t py-2 px-4 text-blue-dark font-semibold"
                  [ngClass]="{'font-bold text-orange-600 cursor-text': currentRequestTab == 'curl'}"
                  (click)="setCurrentRequestTab('curl')"
                  >
                  cURL
                </a>
              </li>
            </ul>
            <textarea
                [ngClass]="{'hidden': currentRequestTab == 'curl'}"
                aria-label="HTTP Request"
                id="http-textarea"
                rows="8"
                readonly
                class="appearance-none rounded-md text-base relative block w-full px-3 py-3 border border-gray-600
                  font-mono placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10"
              >{{ getHttpRequest() }}</textarea>
              <textarea
                [ngClass]="{'hidden': currentRequestTab == 'http'}"
                aria-label="cURL Request"
                id="curl-textarea"
                rows="8"
                readonly
                class="appearance-none rounded-md text-base relative block w-full px-3 py-3 border border-gray-600
                  font-mono placeholder-gray-500 text-gray-900 rounded-t-md
                  focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10"
              >{{ getCurlRequest() }}</textarea>
          </div>
        </div>
        <div
        class="md:flex md:items-center mx-4 mb-4 relative"
        >
          <div class="md:w-full">
            <div *ngIf="loading$ | async" class="absolute top-0 -mt-1 w-full h-20 px-4 py-4 text-center">
              <div class="lds-ellipsis">
                <div class="bg-orange-600"></div>
                <div class="bg-orange-600"></div>
                <div class="bg-orange-600"></div>
                <div class="bg-orange-600"></div>
              </div>
            </div>
            <div *ngIf="responseData" [attr.id]="apiItem.apiServiceMethodName ? apiItem.apiServiceMethodName + 'Response' : ''">
              <h6
                class="mr-4 mt-4 mb-2 md:mb-4 text-lg tracking-tight leading-10 font-bold text-gray-900 sm:leading-none md:text-xl"
                >
                Response
              </h6>
              <textarea
                  aria-label="Response"
                  id="response-textarea"
                  rows="8"
                  readonly
                  class="appearance-none rounded-md text-small text-mono relative block w-full px-3 py-3 border border-gray-600
                    font-mono placeholder-gray-500 text-gray-900 rounded-t-md
                    focus:outline-none focus:shadow-outline-blue focus:border-blue-300 focus:z-10"
                  [ngClass]="{ 'bg-red-200': isErrorResponse }"
                >{{ responseData | json }}</textarea>
              </div>
          </div>
        </div>
    </li>
  </ul>
</div>
