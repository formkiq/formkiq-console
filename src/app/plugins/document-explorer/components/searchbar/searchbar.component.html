
<div class="row">
  <div class="col-12">
    <form [formGroup]="tagsearchForm" class="form-inline ml-auto" (ngSubmit)="search()">
      <div class="input-group mr-sm-2">
        <div class="input-group-prepend">
          <div class="input-group-text" id="btnGroupAddon">Tag Search</div>
        </div>
        <input type="text" class="form-control" formControlName="tagKey" placeholder="Tag Key" [ngClass]="{ 'is-invalid': submitted && f.tagKey.errors }" />
      </div>
      <select class="form-control mr-sm-2" formControlName="searchType">
        <option value="eq">Equals</option>
        <option value="beginsWith">Begins With</option>
      </select>
      <div class="input-group mr-sm-2">
        <input type="text" class="form-control" formControlName="tagValue" placeholder="Tag Value">
      </div>
      <button type="submit" class="btn btn-secondary">Search</button>
    </form>
  </div>
</div>

<div class="container">
  <br /><br />
  <div class="table">
    <table class="table table-hover">
      <thead>
        <tr>
          <th scope="col">Document</th>
          <th scope="col">Path</th>
          <th scope="col">Inserted Date</th>
          <th scope="col">&nbsp;</th>
        </tr>
      </thead>
      <tbody *ngIf="results$ | async as results else divForSubmitQuerySpinner">
        <tr *ngIf="results.documents.length == 0"><td>No Documents Found</td></tr>
        <tr *ngFor="let result of results.documents">
          <td>{{result.documentId}}</td>
          <td>{{result.path}}&nbsp;</td>
          <td>{{result.inserteddate}}&nbsp;</td>
          <td>&nbsp;</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #divForSubmitQuerySpinner>
  <div class="wrapper divForSpinner" *ngIf="submitted && !submittedCompleted && !this.tagsearchForm.invalid">
    <div class="overlay">
      <div class="spinner-wrapper">
        <app-spinner></app-spinner>
      </div>
    </div>

    <ng-content></ng-content>
  </div>
</ng-template>
